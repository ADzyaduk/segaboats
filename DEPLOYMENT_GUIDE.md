# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—é –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

## –ß—Ç–æ –±—ã–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

- n8n UI –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ HTTPS: `https://v-more.ru/n8n/`
- –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ –≤ –∞–¥–º–∏–Ω–∫–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (volume –¥–ª—è images)
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π sitemap.xml –¥–ª—è SEO
- –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π robots.txt —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ –¥–ª—è AI –∫—Ä–∞—É–ª–µ—Ä–æ–≤
- n8n workflows —Å GPT-4o-mini –¥–ª—è —É–º–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –ú–µ—Ö–∞–Ω–∏–∑–º —Å–≤—è–∑–∏ –≤–µ–±-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å Telegram —á–µ—Ä–µ–∑ deep-link
- –†–µ–¥–∏—Ä–µ–∫—Ç —Å v-more.store –Ω–∞ v-more.ru (–æ—Å–Ω–æ–≤–Ω–æ–π –¥–æ–º–µ–Ω)
- –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

---

## ‚ö†Ô∏è –í–ê–ñ–ù–û: –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ v-more.ru

–¢–µ–ø–µ—Ä—å **v-more.ru** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –¥–æ–º–µ–Ω. v-more.store –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç –Ω–∞ –Ω–µ–≥–æ.

**–ï—Å–ª–∏ —É –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –¥–ª—è v-more.ru:**
1. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏: [`docs/SSL_SETUP.md`](docs/SSL_SETUP.md)
2. –ü–æ–ª—É—á–∏—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –¥–ª—è –æ–±–æ–∏—Ö –¥–æ–º–µ–Ω–æ–≤
3. –¢–æ–ª—å–∫–æ –ø–æ—Ç–æ–º –≤—ã–ø–æ–ª–Ω—è–π—Ç–µ —à–∞–≥–∏ –Ω–∏–∂–µ

---

## –ü–æ—Ä—è–¥–æ–∫ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### 1. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥

```bash
# SSH –Ω–∞ —Å–µ—Ä–≤–µ—Ä
ssh root@193.42.127.120

# –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cd /root/segaboats

# –û–±–Ω–æ–≤–∏—Ç—å –∏–∑ git
git pull origin master
```

### 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env —Ñ–∞–π–ª

```bash
# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–º–µ—Ä
cp env.example .env

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
nano .env
```

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ:**
- `TELEGRAM_BOT_TOKEN` - –æ—Ç @BotFather
- `TELEGRAM_BOT_USERNAME` - –∏–º—è –±–æ—Ç–∞ –±–µ–∑ @
- `TELEGRAM_ADMIN_CHAT_ID` - –≤–∞—à ID –æ—Ç @userinfobot
- `TELEGRAM_WEBHOOK_SECRET` - —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ: `openssl rand -hex 32`
- `OPENROUTER_API_KEY` - –æ—Ç https://openrouter.ai/keys (–¥–ª—è AI)

–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: [`docs/ENV_SETUP.md`](docs/ENV_SETUP.md)

### 3. –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫–∏ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

```bash
mkdir -p public/images/boats
chown -R 1000:1000 public/images
chmod -R 755 public/images
```

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

```bash
bash scripts/check-config.sh
```

–°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ.

### 5. –û–±–Ω–æ–≤–∏—Ç—å system nginx

```bash
# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo cp nginx/system-nginx.conf /etc/nginx/sites-available/boats2026

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
sudo nginx -t

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
sudo systemctl reload nginx
```

### 6. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
docker compose down

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –ø–µ—Ä–µ—Å–±–æ—Ä–∫–æ–π
docker compose up -d --build

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
docker ps
```

–ü–æ–¥–æ–∂–¥–∏—Ç–µ 1-2 –º–∏–Ω—É—Ç—ã –ø–æ–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—Å—Ç—è—Ç—Å—è.

### 7. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
curl -I https://v-more.ru/

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å n8n
curl -I https://v-more.ru/n8n/

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å sitemap
curl -s https://v-more.ru/sitemap.xml | head -20

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–¥–∏—Ä–µ–∫—Ç —Å .store –Ω–∞ .ru
curl -I https://v-more.store/
```

---

## –î–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–∞–º

–ü–æ—Å–ª–µ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è:

### –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- URL: https://v-more.ru/admin
- –õ–æ–≥–∏–Ω: `admin@boats2026.ru`
- –ü–∞—Ä–æ–ª—å: –∑–Ω–∞—á–µ–Ω–∏–µ `ADMIN_PASSWORD` –∏–∑ .env (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `admin2026`)

### n8n UI
- URL: https://v-more.ru/n8n/
- –õ–æ–≥–∏–Ω: –∑–Ω–∞—á–µ–Ω–∏–µ `N8N_USER` –∏–∑ .env (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `admin`)
- –ü–∞—Ä–æ–ª—å: –∑–Ω–∞—á–µ–Ω–∏–µ `N8N_PASSWORD` –∏–∑ .env (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `admin2026`)

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- Host: `localhost:5432` (–Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
- Database: `boats2026`
- User: `boats`
- Password: –∑–Ω–∞—á–µ–Ω–∏–µ `POSTGRES_PASSWORD` –∏–∑ .env

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ n8n workflows

### 1. –ó–∞–π—Ç–∏ –≤ n8n UI

https://v-more.ru/n8n/

### 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Credentials

#### PostgreSQL Boats
- Type: **PostgreSQL**
- Host: `postgres`
- Port: `5432`
- Database: `boats2026`
- User: `boats`
- Password: –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ `POSTGRES_PASSWORD`
- SSL: Disabled

#### OpenRouter API
- Type: **HTTP Header Auth**
- Name: `OpenRouter API`
- Header Name: `Authorization`
- Header Value: `Bearer YOUR_OPENROUTER_KEY`

#### Telegram Bot
- Type: **Telegram**
- Access Token: –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ `TELEGRAM_BOT_TOKEN`

### 3. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å workflows

Workflows ‚Üí Import from File ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ:
1. `n8n-workflows/ai-booking-notification.json`
2. `n8n-workflows/smart-booking-reminder.json`

### 4. –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å workflows

–ü–æ—Å–ª–µ –∏–º–ø–æ—Ä—Ç–∞:
- –û—Ç–∫—Ä–æ–π—Ç–µ –∫–∞–∂–¥—ã–π workflow
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ credentials –≤ —É–∑–ª–∞—Ö
- –ù–∞–∂–º–∏—Ç–µ **Active** (–ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É)

–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏: [`n8n-workflows/README.md`](n8n-workflows/README.md)

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Mini App

### 1. –û—Ç–∫—Ä—ã—Ç—å @BotFather

### 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Menu Button

```
/mybots ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –±–æ—Ç–∞ ‚Üí Bot Settings ‚Üí Menu Button ‚Üí Configure menu button
```

–í–≤–µ–¥–∏—Ç–µ:
- Button text: `üõ• –ö–∞—Ç–∞–ª–æ–≥ —è—Ö—Ç`
- Web App URL: `https://v-more.ru`

### 3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã

```
/setcommands ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –±–æ—Ç–∞
```

–û—Ç–ø—Ä–∞–≤—å—Ç–µ:
```
start - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º
boats - –ö–∞—Ç–∞–ª–æ–≥ —è—Ö—Ç
mybookings - –ú–æ–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
help - –ü–æ–º–æ—â—å
```

### 4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å webhook

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ (–∑–∞–º–µ–Ω–∏—Ç–µ YOUR_BOT_TOKEN):

```bash
curl -X POST "https://api.telegram.org/botYOUR_BOT_TOKEN/setWebhook" \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://v-more.ru/api/telegram/webhook",
    "secret_token": "YOUR_WEBHOOK_SECRET",
    "allowed_updates": ["message", "callback_query"]
  }'
```

–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏: [`docs/TELEGRAM_MINIAPP_SETUP.md`](docs/TELEGRAM_MINIAPP_SETUP.md)

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–¥–º–∏–Ω–∫—É

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://v-more.ru/admin
2. –í–æ–π–¥–∏—Ç–µ —Å `admin@boats2026.ru` / `admin2026`
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —è—Ö—Ç—É —Å —Ñ–æ—Ç–æ

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É —Ñ–æ—Ç–æ

–í –∞–¥–º–∏–Ω–∫–µ:
1. –Ø—Ö—Ç—ã ‚Üí –î–æ–±–∞–≤–∏—Ç—å —è—Ö—Ç—É
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ
4. –í—ã–±–µ—Ä–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
5. –§–æ—Ç–æ –¥–æ–ª–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –∏ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å—Å—è

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Telegram Bot

1. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
3. –î–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ —Å –∫–Ω–æ–ø–∫–∞–º–∏
4. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –º–µ–Ω—é ‚Üí –æ—Ç–∫—Ä–æ–µ—Ç—Å—è Mini App

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å n8n

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://v-more.ru/n8n/
2. –í–æ–π–¥–∏—Ç–µ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ workflows –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã

### 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å webhook —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ

1. –ù–∞ —Å–∞–π—Ç–µ –∑–∞–±—Ä–æ–Ω–∏—Ä—É–π—Ç–µ —è—Ö—Ç—É (—á–µ—Ä–µ–∑ –≤–µ–±, –Ω–µ —á–µ—Ä–µ–∑ Telegram)
2. –ü–æ—Å–ª–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ—è–≤–∏—Ç—Å—è –±–ª–æ–∫ "–ü–æ–ª—É—á–∞–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram"
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É ‚Üí –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –±–æ—Ç
4. –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω—ã!"

---

## Troubleshooting

### n8n –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker logs boats2026-n8n --tail 50

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å nginx
sudo nginx -t
sudo systemctl status nginx

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é N8N_PATH
docker exec boats2026-n8n printenv | grep N8N_PATH
```

### –§–æ—Ç–æ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞
ls -la public/images/

# –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∞
chown -R 1000:1000 public/images
chmod -R 755 public/images

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å volume
docker inspect boats2026-app | grep -A 5 Mounts
```

### Telegram webhook –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å webhook status
curl "https://api.telegram.org/botYOUR_TOKEN/getWebhookInfo"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
docker logs boats2026-app --tail 50 | grep -i telegram
```

### AI —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å OpenRouter –∫–ª—é—á –≤ n8n
docker exec boats2026-n8n printenv | grep OPENROUTER

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ n8n
docker logs boats2026-n8n --tail 50

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å –Ω–∞ openrouter.ai/activity
```

---

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å—ë
docker compose restart

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
docker compose up -d --build app

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker logs -f boats2026-app

# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –±–∞–∑–µ
docker exec -it boats2026-db psql -U boats -d boats2026

# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
bash scripts/diagnose-server.sh
```

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [SSL_SETUP.md](docs/SSL_SETUP.md) - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –¥–ª—è v-more.ru
- [ENV_SETUP.md](docs/ENV_SETUP.md) - –ü–æ–¥—Ä–æ–±–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- [TELEGRAM_MINIAPP_SETUP.md](docs/TELEGRAM_MINIAPP_SETUP.md) - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Mini App
- [n8n-workflows/README.md](n8n-workflows/README.md) - –û–ø–∏—Å–∞–Ω–∏–µ workflows
