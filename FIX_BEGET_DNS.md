# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å Beget –¥–æ–º–µ–Ω–æ–º

## –ü—Ä–æ–±–ª–µ–º–∞

Webhook –Ω–∞—Å—Ç—Ä–æ–µ–Ω, –Ω–æ Telegram –ø–æ–ª—É—á–∞–µ—Ç –æ—à–∏–±–∫—É:
```
"last_error_message":"Connection refused"
"ip_address":"5.101.152.161"  // –≠—Ç–æ IP Beget, –∞ –Ω–µ –≤–∞—à —Å–µ—Ä–≤–µ—Ä!
```

**–ü—Ä–∏—á–∏–Ω–∞:** –î–æ–º–µ–Ω `klernesokof.beget.app` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ IP Beget (5.101.152.161), –∞ –Ω–µ –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä (155.212.189.214).

## –†–µ—à–µ–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å DNS –≤ –ø–∞–Ω–µ–ª–∏ Beget (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. **–ó–∞–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Beget**
2. **–ù–∞–π–¥–∏—Ç–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ DNS** –¥–ª—è –¥–æ–º–µ–Ω–∞ `klernesokof.beget.app`
3. **–î–æ–±–∞–≤—å—Ç–µ/–∏–∑–º–µ–Ω–∏—Ç–µ A-–∑–∞–ø–∏—Å—å:**
   - **–ò–º—è:** `@` –∏–ª–∏ `klernesokof` (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–∞–Ω–µ–ª–∏)
   - **–¢–∏–ø:** `A`
   - **–ó–Ω–∞—á–µ–Ω–∏–µ:** `155.212.189.214`
   - **TTL:** `3600`

4. **–ü–æ–¥–æ–∂–¥–∏—Ç–µ 5-10 –º–∏–Ω—É—Ç** –¥–ª—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è DNS

5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ DNS:**
   ```bash
   nslookup klernesokof.beget.app
   # –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è: 155.212.189.214
   ```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–¥–¥–æ–º–µ–Ω Beget —Å –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ–º

–ï—Å–ª–∏ Beget –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å A-–∑–∞–ø–∏—Å—å –Ω–∞–ø—Ä—è–º—É—é:

1. **–í –ø–∞–Ω–µ–ª–∏ Beget –Ω–∞–π–¥–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–¥–æ–º–µ–Ω–∞**
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ** (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ):
   - –í–∫–ª—é—á–∏—Ç–µ "–ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ" –∏–ª–∏ "Forwarding"
   - –£–∫–∞–∂–∏—Ç–µ: `http://155.212.189.214:80`

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ Beget

–í–æ–∑–º–æ–∂–Ω–æ, –¥–æ–º–µ–Ω —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω, –Ω–æ –Ω—É–∂–Ω–æ:
- –í–∫–ª—é—á–∏—Ç—å SSL –≤ –ø–∞–Ω–µ–ª–∏ Beget
- –†–∞–∑—Ä–µ—à–∏—Ç—å –≤–Ω–µ—à–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å firewall –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ DNS

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ DNS:**
   ```bash
   nslookup klernesokof.beget.app
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –¥–æ–º–µ–Ω–∞:**
   ```bash
   curl -I https://klernesokof.beget.app/health
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥–æ–º–µ–Ω —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä:**
   ```bash
   # –ù–∞ –≤–∞—à–µ–º —Å–µ—Ä–≤–µ—Ä–µ
   curl -H "Host: klernesokof.beget.app" http://localhost/health
   ```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ webhook —Å–Ω–æ–≤–∞:**
   ```bash
   curl "https://api.telegram.org/bot8533883256:AAGGtdzBkMiPdswF49zAiYesz3eaqVyafkU/getWebhookInfo"
   ```

   –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
   ```json
   {
     "ok": true,
     "result": {
       "url": "https://klernesokof.beget.app/api/telegram/webhook",
       "ip_address": "155.212.189.214",  // –í–∞—à IP!
       "last_error_message": null
     }
   }
   ```

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å IP –Ω–∞–ø—Ä—è–º—É—é —Å ngrok

–ï—Å–ª–∏ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å DNS –≤ Beget, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ngrok:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ ngrok
wget https://bin.equinox.io/c/bNyj1mQVY4c/ngrok-v3-stable-linux-amd64.tgz
tar xvzf ngrok-v3-stable-linux-amd64.tgz
sudo mv ngrok /usr/local/bin/

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç—É–Ω–Ω–µ–ª—å
ngrok http 80

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π HTTPS URL –¥–ª—è webhook
```

## –í–∞–∂–Ω–æ

- ‚úÖ DNS –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–æ–≥—É—Ç –∑–∞–Ω—è—Ç—å –¥–æ 24 —á–∞—Å–æ–≤ (–æ–±—ã—á–Ω–æ 5-10 –º–∏–Ω—É—Ç)
- ‚úÖ –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç 80 –∏ 443 –æ—Ç–∫—Ä—ã—Ç—ã –Ω–∞ –≤–∞—à–µ–º —Å–µ—Ä–≤–µ—Ä–µ
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall: `sudo ufw allow 80/tcp && sudo ufw allow 443/tcp`
