# üöÄ –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π Boats2026

## –í–∞—Ä–∏–∞–Ω—Ç 1: Docker Compose (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–¥–µ–ª–∞–Ω–æ)
git clone <your-repo-url>
cd boats2026

# –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
nano .env  # –∏–ª–∏ notepad .env –Ω–∞ Windows
```

### –®–∞–≥ 2: –ó–∞–ø—É—Å–∫

**Linux/Mac:**
```bash
chmod +x scripts/deploy.sh
./scripts/deploy.sh
```

**Windows PowerShell:**
```powershell
.\scripts\deploy.ps1
```

**–ò–ª–∏ –≤—Ä—É—á–Ω—É—é:**
```bash
# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
docker-compose up -d --build

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
docker-compose exec app npm run db:push
docker-compose exec app npm run db:seed  # –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞

- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: http://localhost
- n8n –ø–∞–Ω–µ–ª—å: http://localhost:5678
- –õ–æ–≥–∏: `docker-compose logs -f app`

---

## –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π –Ω–∞ VPS

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Ubuntu 20.04+ –∏–ª–∏ Debian 11+
- Root –¥–æ—Å—Ç—É–ø
- –î–æ–º–µ–Ω (–¥–ª—è SSL)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# 1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
sudo apt update && sudo apt upgrade -y

# 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh
sudo usermod -aG docker $USER

# 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker Compose
sudo curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose

# 4. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
cd /opt
sudo git clone <your-repo-url> boats2026
cd boats2026

# 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env
sudo cp .env.example .env
sudo nano .env  # –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

# 6. –ó–∞–ø—É—Å–∫
sudo docker-compose up -d --build

# 7. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
sudo docker-compose exec app npm run db:push
```

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL (Let's Encrypt)

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Certbot

```bash
sudo apt install certbot python3-certbot-nginx -y
```

### 2. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ nginx –≤ docker-compose –≤—Ä–µ–º–µ–Ω–Ω–æ
docker-compose stop nginx

# –ü–æ–ª—É—á–∏—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
sudo certbot certonly --standalone -d your-domain.com -d www.your-domain.com

# –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –±—É–¥—É—Ç –≤:
# /etc/letsencrypt/live/your-domain.com/fullchain.pem
# /etc/letsencrypt/live/your-domain.com/privkey.pem
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ nginx

```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ production –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
cp nginx/conf.d/production.conf.example nginx/conf.d/default.conf

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ server_name –≤ default.conf
nano nginx/conf.d/default.conf

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –≤ nginx/ssl/
mkdir -p nginx/ssl
sudo cp /etc/letsencrypt/live/your-domain.com/fullchain.pem nginx/ssl/
sudo cp /etc/letsencrypt/live/your-domain.com/privkey.pem nginx/ssl/
sudo chmod 644 nginx/ssl/*.pem
```

### 4. –û–±–Ω–æ–≤–∏—Ç–µ docker-compose.yml

–î–æ–±–∞–≤—å—Ç–µ volume –¥–ª—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤:

```yaml
nginx:
  volumes:
    - ./nginx/ssl:/etc/nginx/ssl:ro
```

### 5. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫

```bash
docker-compose up -d
```

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Bot

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram, –Ω–∞–π–¥–∏—Ç–µ @BotFather
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newbot`
3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook

–î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:
```env
TELEGRAM_BOT_TOKEN=your-token-here
TELEGRAM_BOT_USERNAME=your-bot-username
TELEGRAM_WEBHOOK_SECRET=random-secret-string
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ webhook

```bash
# –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
curl -X POST "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/setWebhook" \
  -d "url=https://your-domain.com/api/telegram/webhook" \
  -d "secret_token=your-webhook-secret"
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
curl "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getWebhookInfo"
```

---

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏

```bash
# –°—Ç–∞—Ç—É—Å
docker-compose ps

# –õ–æ–≥–∏
docker-compose logs -f app
docker-compose logs -f nginx
docker-compose logs -f postgres

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker-compose restart app

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å —É–¥–∞–ª–µ–Ω–∏–µ–º volumes (‚ö†Ô∏è —É–¥–∞–ª–∏—Ç –¥–∞–Ω–Ω—ã–µ –ë–î)
docker-compose down -v
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
docker-compose exec postgres psql -U boats -d boats2026

# –ë—ç–∫–∞–ø
docker-compose exec postgres pg_dump -U boats boats2026 > backup.sql

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
docker-compose exec -T postgres psql -U boats boats2026 < backup.sql

# –ú–∏–≥—Ä–∞—Ü–∏–∏
docker-compose exec app npm run db:push

# Seed (—Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ)
docker-compose exec app npm run db:seed
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# 1. –ü–æ–ª—É—á–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
git pull

# 2. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose up -d --build

# 3. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)
docker-compose exec app npm run db:push
```

---

## Troubleshooting

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker-compose logs app

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
docker-compose exec app env | grep -E "DATABASE|TELEGRAM|N8N"

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
docker-compose exec app npm run db:push
```

### –û—à–∏–±–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å PostgreSQL
docker-compose ps postgres

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker-compose logs postgres

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ –ë–î (‚ö†Ô∏è —É–¥–∞–ª–∏—Ç –¥–∞–Ω–Ω—ã–µ)
docker-compose down -v
docker-compose up -d postgres
sleep 5
docker-compose exec app npm run db:push
```

### Nginx –æ—à–∏–±–∫–∏

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
docker-compose exec nginx nginx -t

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ nginx
docker-compose restart nginx

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker-compose logs nginx
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ—Ä—Ç–∞–º–∏

–ï—Å–ª–∏ –ø–æ—Ä—Ç—ã –∑–∞–Ω—è—Ç—ã:

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–Ω—è—Ç—ã–µ –ø–æ—Ä—Ç—ã
sudo netstat -tulpn | grep -E "80|443|3000|5432|5678"

# –ò–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç—ã –≤ docker-compose.yml
# –ù–∞–ø—Ä–∏–º–µ—Ä, –∏–∑–º–µ–Ω–∏—Ç–µ "80:80" –Ω–∞ "8080:80"
```

---

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### Health Check

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
curl http://localhost/health

# –ò–ª–∏ —á–µ—Ä–µ–∑ docker
docker-compose exec app wget -qO- http://localhost:3000/api/health
```

### –†–µ—Å—É—Ä—Å—ã

```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker-compose logs -f
```

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Firewall (UFW)

```bash
# –†–∞–∑—Ä–µ—à–∏—Ç—å —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ—Ä—Ç—ã
sudo ufw allow 22/tcp    # SSH
sudo ufw allow 80/tcp     # HTTP
sudo ufw allow 443/tcp    # HTTPS
sudo ufw enable
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

```bash
# –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ —Å–∏—Å—Ç–µ–º—É
sudo apt update && sudo apt upgrade -y

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —è–¥—Ä–∞
sudo reboot
```

---

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker-compose logs`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é: `docs/DEPLOYMENT.md`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ issues –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
