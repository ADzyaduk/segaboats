# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Mini App –¥–ª—è –Ø—Ö—Ç—ã –°–æ—á–∏

## –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞

### –ï—Å–ª–∏ –±–æ—Ç –µ—â—ë –Ω–µ —Å–æ–∑–¥–∞–Ω:

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞–π–¥–∏—Ç–µ @BotFather
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/newbot`
3. –í–≤–µ–¥–∏—Ç–µ –∏–º—è –±–æ—Ç–∞: `–Ø—Ö—Ç—ã –°–æ—á–∏`
4. –í–≤–µ–¥–∏—Ç–µ username: `YachtsSochiBot` (–∏–ª–∏ –¥—Ä—É–≥–æ–π —Å–≤–æ–±–æ–¥–Ω—ã–π)
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω

### –ï—Å–ª–∏ –±–æ—Ç —É–∂–µ –µ—Å—Ç—å:

1. –û—Ç–∫—Ä–æ–π—Ç–µ @BotFather
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/mybots`
3. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞

## –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Mini App (Web App)

### –í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ Menu Button (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –í @BotFather –æ—Ç–ø—Ä–∞–≤—å—Ç–µ `/mybots`
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
3. –ù–∞–∂–º–∏—Ç–µ **Bot Settings**
4. –ù–∞–∂–º–∏—Ç–µ **Menu Button**
5. –ù–∞–∂–º–∏—Ç–µ **Configure menu button**
6. –í–≤–µ–¥–∏—Ç–µ:
   - **Button text**: `üõ• –ö–∞—Ç–∞–ª–æ–≥ —è—Ö—Ç`
   - **Web App URL**: `https://v-more.store`

### –í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ Web App –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

1. –í @BotFather –æ—Ç–ø—Ä–∞–≤—å—Ç–µ `/setmenubutton`
2. –í—ã–±–µ—Ä–∏—Ç–µ –±–æ—Ç–∞
3. –í–≤–µ–¥–∏—Ç–µ URL: `https://v-more.store`

## –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞

1. –í @BotFather –æ—Ç–ø—Ä–∞–≤—å—Ç–µ `/setcommands`
2. –í—ã–±–µ—Ä–∏—Ç–µ –±–æ—Ç–∞
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥:

```
start - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º
boats - –ö–∞—Ç–∞–ª–æ–≥ —è—Ö—Ç
mybookings - –ú–æ–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
help - –ü–æ–º–æ—â—å
```

## –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Webhook

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
# –ó–∞–º–µ–Ω–∏—Ç–µ YOUR_BOT_TOKEN –Ω–∞ –≤–∞—à —Ç–æ–∫–µ–Ω
# –ó–∞–º–µ–Ω–∏—Ç–µ YOUR_SECRET –Ω–∞ —Å–ª—É—á–∞–π–Ω—É—é —Å—Ç—Ä–æ–∫—É

curl -X POST "https://api.telegram.org/botYOUR_BOT_TOKEN/setWebhook" \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://v-more.store/api/telegram/webhook",
    "secret_token": "YOUR_SECRET",
    "allowed_updates": ["message", "callback_query"]
  }'
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ webhook:

```bash
curl "https://api.telegram.org/botYOUR_BOT_TOKEN/getWebhookInfo"
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å:
```json
{
  "ok": true,
  "result": {
    "url": "https://v-more.store/api/telegram/webhook",
    "has_custom_certificate": false,
    "pending_update_count": 0
  }
}
```

## –®–∞–≥ 5: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ `.env` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```env
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
TELEGRAM_BOT_USERNAME=YachtsSochiBot
TELEGRAM_WEBHOOK_SECRET=your_random_secret_string
TELEGRAM_ADMIN_CHAT_ID=123456789
```

### –ö–∞–∫ —É–∑–Ω–∞—Ç—å TELEGRAM_ADMIN_CHAT_ID:

1. –ù–∞–ø–∏—à–∏—Ç–µ –±–æ—Ç—É @userinfobot –≤ Telegram
2. –û–Ω –æ—Ç–≤–µ—Ç–∏—Ç –≤–∞—à–∏–º ID (—á–∏—Å–ª–æ)
3. –ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –≥—Ä—É–ø–ø—É –∏ –¥–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ @RawDataBot —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å chat_id –≥—Ä—É–ø–ø—ã

## –®–∞–≥ 6: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

```bash
cd /root/segaboats  # –∏–ª–∏ –≤–∞—à–∞ –ø–∞–ø–∫–∞ —Å –ø—Ä–æ–µ–∫—Ç–æ–º
docker compose up -d --build app
```

## –®–∞–≥ 7: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –≤ Telegram
2. –ù–∞–∂–º–∏—Ç–µ **Start** –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
3. –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–∞–º–∏
4. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –º–µ–Ω—é (—Å–ª–µ–≤–∞ –æ—Ç –ø–æ–ª—è –≤–≤–æ–¥–∞) - –¥–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è Mini App

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### Mini App –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ URL –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `https://`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç: `curl -I https://v-more.store`
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Å–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω

### Webhook –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker logs boats2026-app --tail 50`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å–µ–∫—Ä–µ—Ç —Å–æ–≤–ø–∞–¥–∞–µ—Ç –≤ `.env` –∏ –≤ `setWebhook`
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–æ—Ä—Ç 443 –æ—Ç–∫—Ä—ã—Ç

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ `.env`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ webhook: `curl "https://api.telegram.org/botTOKEN/getWebhookInfo"`
3. –ï—Å–ª–∏ pending_update_count –±–æ–ª—å—à–æ–π, —É–¥–∞–ª–∏—Ç–µ webhook –∏ —Å–æ–∑–¥–∞–π—Ç–µ –∑–∞–Ω–æ–≤–æ

```bash
# –£–¥–∞–ª–∏—Ç—å webhook
curl "https://api.telegram.org/botTOKEN/deleteWebhook"

# –°–æ–∑–¥–∞—Ç—å –∑–∞–Ω–æ–≤–æ
curl -X POST "https://api.telegram.org/botTOKEN/setWebhook" ...
```

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã BotFather

- `/setname` - –∏–∑–º–µ–Ω–∏—Ç—å –∏–º—è –±–æ—Ç–∞
- `/setdescription` - –æ–ø–∏—Å–∞–Ω–∏–µ –±–æ—Ç–∞ (–≤–∏–¥–Ω–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏)
- `/setabouttext` - —Ç–µ–∫—Å—Ç "–û –±–æ—Ç–µ"
- `/setuserpic` - —Ñ–æ—Ç–æ –ø—Ä–æ—Ñ–∏–ª—è –±–æ—Ç–∞
- `/setcommands` - –∫–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞
